<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Local STT LoRA</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Local Speech-to-Text (LoRA)</h1>

      <div class="row">
        <label>Adapter dir</label>
        <input id="adapterDir" type="text" value="{{ adapter_dir_default }}" />
      </div>

      <div class="row">
        <label>Device</label>
        <select id="device">
          <option value="">auto</option>
          <option value="cpu">cpu</option>
          <option value="cuda">cuda</option>
        </select>

        <label>Language</label>
        <input id="language" type="text" placeholder="e.g. en, fr (blank = auto)" />
      </div>

      <div class="row">
        <label>Beam</label>
        <input id="beam" type="number" value="5" min="1" max="10" />
        <label>Temp</label>
        <input id="temp" type="number" value="0.0" step="0.1" min="0" max="1" />
      </div>

      <div class="row">
        <button id="recordBtn" type="button">Record</button>
        <button id="stopBtn" type="button" disabled>Stop</button>
        <button id="uploadBtn" type="button">Upload sound file</button>
        <button id="transcribeBtn" type="button" disabled>Transcribe</button>
        <button id="copyBtn" type="button" disabled>Copy</button>
        <button id="saveBtn" type="button" disabled>Save transcript</button>
        <input id="uploadFile" type="file" accept="audio/*" style="display: none" />
      </div>

      <div class="row">
        <div id="status">Idle</div>
      </div>

      <textarea id="output" rows="12" placeholder="Transcript appears here..."></textarea>

      <div class="row">
        <label>Download model</label>
        <select id="modelSelect">
          <option value="openai/whisper-small">openai/whisper-small</option>
          <option value="openai/whisper-medium">openai/whisper-medium</option>
          <option value="openai/whisper-large-v3">openai/whisper-large-v3</option>
          <option value="">Custom (enter below)</option>
        </select>
        <input id="customModel" type="text" placeholder="custom repo id e.g. username/model" />
        <button id="downloadModelBtn">Download</button>
      </div>
    </div>

    <script src="/static/main.js" defer></script>
  </body>
</html>
